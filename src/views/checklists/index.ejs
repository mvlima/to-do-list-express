<%- include('../layout/header', { title: 'Task List'}) %>
<!--  -->
<%- include('../layout/menu') %>

<section class="section">
  <div class="container">
    <div class="columns">
      <div class="column is-four-fifths">
        <h1 class="title size-4">Checklists</h1>
      </div>
      <div class="column is-one-fifth">
        <a href="/checklists/new" class="button is-success is-small"
          >New Checklist</a
        >
      </div>
    </div>

    <div class="columns is-multiline">
      <% checklists.forEach(checklist => { %>
      <div class="column is-one-quarter">
        <div class="card has-background-white-ter">
          <div class="card-content">
            <p class="subtitle is-size-5"><%= checklist.name %></p>

            <p class="subtitle is-size-6">
              <% if(checklist.tasks.length === 0) { %>
                No tasks yet
              <% } else if(checklist.tasks.length === 1) { %>
                1 task
              <% } else { %>
                <%= checklist.tasks.length %> tasks
              <% } %>
            </p>
          </div>
          
          <footer class="card-footer">
            <p class="card-footer-item">
              <span>
                <a href="/checklists/<%= checklist._id %>">See</a>
              </span>
            </p>

            <p class="card-footer-item">
              <span>
                <a href="/checklists/<%= checklist.id %>/edit">Edit</a>
              </span>
            </p>

            <p class="card-footer-item">
              <span>
                <a
                  href="/checklists/<%= checklist.id %>?_method=delete"
                  class="has-text-danger"
                  >Remove</a
                >
              </span>
            </p>
          </footer>
        </div>
      </div>
      <% }) %>
    </div>
  </div>
</section>

<%- include('../layout/footer') %>
